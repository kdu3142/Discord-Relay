# =============================================================================
# DISCORD RELAY BOT - CONFIGURATION FILE
# =============================================================================
# This is YOUR configuration file - store all your tokens, URLs, and keys here!
# 
# Fill in the values below with your actual Discord token, n8n webhook URL, etc.
# All the documentation and instructions are included right in this file.
#
# IMPORTANT: Never commit this file to version control! It contains sensitive data.
# =============================================================================


# =============================================================================
# ════════════════════════════════════════════════════════════════════════════
# ACTUAL CONFIGURATION VALUES - EDIT THESE LINES BELOW:
# ════════════════════════════════════════════════════════════════════════════
# =============================================================================

# -----------------------------------------------------------------------------
# DISCORD BOT CONFIGURATION
# -----------------------------------------------------------------------------

DISCORD_TOKEN=your_discord_bot_token_here
# ↑ EDIT THIS LINE: Replace with your actual Discord bot token
#   Get it from: https://discord.com/developers/applications → Your App → Bot tab → Token
#   Example format: MTIzNDU2Nzg5MDEyMzQ1Njc4OQ.AbCdEf.GhIjKlMnOpQrStUvWxYz

DISCORD_CLIENT_ID=
# ↑ EDIT THIS LINE (Optional): Your Discord Application Client ID
#   Get it from: Discord Developer Portal → General Information → Application ID
#   Example: 123456789012345678

# -----------------------------------------------------------------------------
# N8N WEBHOOK CONFIGURATION
# -----------------------------------------------------------------------------

N8N_WEBHOOK_URL=your_n8n_webhook_url_here
# ↑ EDIT THIS LINE (Optional): Webhook padrão do n8n
#   Como obter:
#   1. Abra sua instância n8n
#   2. Crie um workflow com um node Webhook (método POST)
#   3. Copie a URL completa do webhook
#   Exemplos:
#   - Local: http://localhost:5678/webhook/discord/bot/your-id
#   - Docker: http://n8n:5678/webhook/discord/bot/your-id
#   - Externo: https://your-domain.com/webhook/discord/bot/your-id

N8N_WEBHOOKS=
# ↑ EDIT THIS LINE (Optional): Múltiplos webhooks em formato JSON
#   Permite configurar vários webhooks para diferentes workflows
#   Formato: {"workflow1": "url1", "workflow2": "url2"}
#   Exemplo: {"chatbot": "https://n8n.com/webhook/chatbot", "notifications": "https://n8n.com/webhook/notify"}
#   Use a Web UI para configurar facilmente múltiplos webhooks

# -----------------------------------------------------------------------------
# SECURITY CONFIGURATION
# -----------------------------------------------------------------------------

RELAY_SHARED_SECRET=
# ↑ EDIT THIS LINE (Recommended): Shared secret for HMAC signing
#   Generate with: openssl rand -hex 32
#   IMPORTANT: Use the SAME secret in your n8n workflow!
#   Example: a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6

# -----------------------------------------------------------------------------
# BOT BEHAVIOR CONFIGURATION
# -----------------------------------------------------------------------------

BOT_PREFIX=!bot
# ↑ EDIT THIS LINE (Optional): Command prefix to trigger the bot
#   Default: !bot
#   Examples: !bot, !tobias, @bot
#   Note: Bot also responds to mentions regardless of prefix
#   Optional: @everyone/@here can also trigger if enabled below

ALLOWED_GUILD_IDS=
# ↑ EDIT THIS LINE (Optional): Comma-separated Discord server IDs
#   Leave empty to allow all servers
#   To get Server ID: Enable Developer Mode → Right-click server → Copy Server ID
#   Example: 123456789012345678,987654321098765432

ALLOW_DMS=true
# ↑ EDIT THIS LINE (Optional): Allow bot to respond to Direct Messages
#   Options: true, false
#   Default: false
#   When enabled, ANY message sent directly to the bot will trigger the webhook
#   No prefix or mention needed in DMs - the message goes directly to n8n

ALLOW_EVERYONE_MENTIONS=true
# ↑ EDIT THIS LINE (Optional): Allow @everyone/@here to trigger the webhook
#   Options: true, false
#   Default: true
#   When disabled, the bot only responds to prefix or direct mentions

# -----------------------------------------------------------------------------
# LOGGING CONFIGURATION
# -----------------------------------------------------------------------------

LOG_LEVEL=info
# ↑ EDIT THIS LINE (Optional): Logging verbosity
#   Options: error, warn, info, debug
#   Default: info

NODE_ENV=production
# ↑ EDIT THIS LINE (Optional): Environment mode
#   Options: development, production
#   Default: production

START_WEBUI=true
# ↑ EDIT THIS LINE (Optional): Enable configuration web UI
#   Options: true, false, 1, 0
#   Default: true
#   When enabled: http://localhost:3001 (or WEBUI_PORT)

WEBUI_PORT=3001
# ↑ EDIT THIS LINE (Optional): Port for configuration web UI
#   Default: 3001
#   Change if port 3001 is already in use


# =============================================================================
# ════════════════════════════════════════════════════════════════════════════
# END OF CONFIGURATION VALUES
# Everything below is documentation only - do not edit
# ════════════════════════════════════════════════════════════════════════════
# =============================================================================


# =============================================================================
# DETAILED DOCUMENTATION
# =============================================================================
# Below you'll find detailed instructions for each configuration value.
# The actual values to edit are in the section above.
# =============================================================================

# -----------------------------------------------------------------------------
# DISCORD BOT SETUP INSTRUCTIONS
# -----------------------------------------------------------------------------
#
# 1. CREATE DISCORD APPLICATION:
#    - Go to: https://discord.com/developers/applications
#    - Click "New Application" and give it a name
#    - Go to the "Bot" tab
#    - Click "Add Bot" and confirm
#
# 2. GET BOT TOKEN:
#    - In the "Bot" tab, under "Token"
#    - Click "Reset Token" or "Copy" to get your bot token
#    - Paste it in DISCORD_TOKEN above
#
# 3. ENABLE REQUIRED INTENTS:
#    - In the "Bot" tab, scroll to "Privileged Gateway Intents"
#    - Enable: ✅ Message Content Intent (REQUIRED)
#    - Also ensure: ✅ GUILDS, ✅ GUILD_MESSAGES
#
# 4. INSTALL BOT TO YOUR SERVER:
#    - Go to "OAuth2 → URL Generator"
#    - Select scopes: bot, applications.commands (optional)
#    - Select permissions: Read Messages, Send Messages, Read Message History
#    - Copy the generated URL and open it in your browser
#    - Select your server and authorize
#
# 5. GET CLIENT ID (Optional):
#    - Go to "General Information" tab
#    - Copy the "Application ID"
#    - Paste it in DISCORD_CLIENT_ID above (for future slash commands)

# -----------------------------------------------------------------------------
# N8N WEBHOOK SETUP INSTRUCTIONS
# -----------------------------------------------------------------------------
#
# 1. CREATE WEBHOOK IN N8N:
#    - Open your n8n instance
#    - Create a new workflow or open an existing one
#    - Add a "Webhook" node as the trigger
#    - Set method to "POST"
#    - Set a path (e.g., /discord/bot/abc123xyz)
#    - Save the workflow
#
# 2. GET WEBHOOK URL:
#    - Copy the full webhook URL shown in the Webhook node
#    - It will look like: https://your-n8n-instance.com/webhook/discord/bot/abc123xyz
#    - Paste it in N8N_WEBHOOK_URL above
#
# 3. NETWORK CONFIGURATION:
#    - If n8n is on the same Docker network: use http://n8n:5678/...
#    - If n8n is on localhost: use http://localhost:5678/...
#    - If n8n is external: use the full https:// URL

# -----------------------------------------------------------------------------
# SECURITY SETUP (HMAC SIGNING)
# -----------------------------------------------------------------------------
#
# 1. GENERATE SHARED SECRET:
#    Run in terminal: openssl rand -hex 32
#    Copy the generated string
#
# 2. SET IN CONFIG:
#    Paste the secret in RELAY_SHARED_SECRET above
#
# 3. SET IN N8N WORKFLOW:
#    Add a Code node after the Webhook node:
#    ```javascript
#    const crypto = require('crypto');
#    const secret = $env.RELAY_SHARED_SECRET; // Set this in n8n environment
#    const receivedSignature = $headers['x-relay-signature'];
#    const body = JSON.stringify($json);
#    const hmac = crypto.createHmac('sha256', secret);
#    hmac.update(body);
#    const expectedSignature = hmac.digest('hex');
#    if (receivedSignature !== expectedSignature) {
#      throw new Error('Invalid signature');
#    }
#    return $json;
#    ```

# -----------------------------------------------------------------------------
# QUICK SETUP CHECKLIST
# -----------------------------------------------------------------------------
# [ ] 1. Get DISCORD_TOKEN from Discord Developer Portal
# [ ] 2. Enable "Message Content Intent" in Discord Developer Portal (Bot tab)
# [ ] 3. Install bot to your Discord server (OAuth2 > URL Generator)
# [ ] 4. Create n8n webhook and get N8N_WEBHOOK_URL
# [ ] 5. Generate RELAY_SHARED_SECRET (optional but recommended)
# [ ] 6. Configure the same RELAY_SHARED_SECRET in your n8n workflow
# [ ] 7. Fill in all required values in the section above
# [ ] 8. Save this file
# [ ] 9. Start the bot and test!

# =============================================================================
